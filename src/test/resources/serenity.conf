serenity {
  headless.mode = false

  console.colors = true
  logging = VERBOSE
  take.screenshots = AFTER_EACH_STEP

  report {
    accessibility = true
    durations = "1,2,4,8,15,30,60"
    exclude.tags = "resetappstate,singlebrowser,manual"
  }

  requirement {
    types = "epic, feature"
  }

  sysinfo {
    lead = Daisy
    build = "${env.BUILD_NUMBER}"
    Test Run {
      Run By = "${env.USER}"
      Java Version = "${java.version}"
    }
  }
}

environments {
  chrome {
    webdriver {
      driver = chrome
      autodownload = true
      capabilities {
        browserName = "chrome"
        acceptInsecureCerts = true
        "goog:chromeOptions" {
          args = [
            "test-type", "ignore-certificate-errors", "headless", "start-maximized","incognito", "disable-infobars", "disable-gpu", "disable-default-apps", "disable-popup-blocking"
          ]
        }
      }
    }
  }

  edge {
    webdriver {
      capabilities {
        browserName = "MicrosoftEdge"
        timeouts {
          implicit = 3000
          script = 3000
          pageLoad = 3000
        }
        "ms:edgeOptions" {
          args = [
            "test-type", "ignore-certificate-errors", "headless",
            "incognito", "disable-infobars", "disable-gpu", "disable-default-apps", "disable-popup-blocking"
          ]
        }
      }
    }
  }

  firefox {
    webdriver {
      capabilities {
        browserName = "firefox"
        timeouts {
          implicit = 3000
          script = 3000
          pageLoad = 3000
        }
        pageLoadStrategy = "normal"
        acceptInsecureCerts = true
        unhandledPromptBehavior = "dismiss"
        strictFileInteractability = true
        "moz:firefoxOptions" {
          args = ["-headless"]
          prefs {
            "javascript.options.showInConsole" = false
          }
          log {
            level = "info"
          }
        }
      }
    }
  }

  remote {
    webdriver {
      driver = remote
      remote {
        url = "http://jenkins_selenium-chrome-server_1:4444/wd/hub"
        driver = chrome
      }
    }
  }

  default {
    webdriver.base.wikipedia.url = "https://www.wikipedia.org/"
  }
  dev {
    webdriver.base.url = "https://opensource-demo.orangehrmlive.com/dev"
  }
  staging {
    webdriver.base.url = "https://opensource-demo.orangehrmlive.com/staging"
  }
  prod {
    webdriver.base.url = "https://opensource-demo.orangehrmlive.com/prod"
  }
}
